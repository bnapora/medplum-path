FROM node:18-bullseye-slim

WORKDIR /app

COPY package-lock.json /app/
COPY package.json /app/
COPY packages /app/packages
COPY scripts /app/scripts

RUN npm ci

COPY turbo.json /app/
COPY tsconfig.json /app/
COPY tsdoc.json /app/
COPY api-extractor.json /app/

RUN npm run build:fast

COPY /apps/path-medical /app/path-medical
WORKDIR /app/path-medical
RUN npm install

COPY /apps/app-admin /app/app-admin
WORKDIR /app/app-admin
RUN npm install
RUN npm run build
# COPY /examples /app/examples

WORKDIR /app/
COPY /apps/docker/entrypoint-apps.sh /app/entrypoint.sh
RUN chmod 0700 /app/entrypoint.sh


# ENTRYPOINT ["tail", "-f", "/dev/null"]

